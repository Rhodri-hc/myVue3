<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>渲染器</title>

    <style>
        .bg{
            background: #abcdef;
        } 
        .textColor{
            color: #666;
        }
    </style>
</head>
<body>
    <div id="app"></div>

    <script src="../responsive/proxy.js"></script>
    <script src="../responsive/reactive.js"></script>
    <script src="../responsive/ref.js"></script>
    <script src="./createRenderer.js"></script>
  
    <script>
        // // 渲染器与响应式之间的结合
        // const count = ref(1);
        // const { render } = createRenderer()

        // effect(() => {
        //     render(`<h1>${count.value}</h1>`, document.getElementById('app'));
        // })

        // count.value++;

        // // 自定义渲染器
        // const vNode = {
        //     type: 'h1',
        //     children: "hello Vue3"
        // }

        // // 采用浏览器渲染配置创建渲染器
        // const { render } = createRenderer(BROWSER_RENDER_CONFIG)

        // render(vNode, document.querySelector('#app'))

        // // 挂载子节点和元素的属性
        // const vNode = {
        //     type: 'div',
        //     props: {
        //         id: "foo",
        //         // 需要将class 进行数据结构转换为字符串
        //         class: "bg textColor"
        //     },
        //     children: [
        //         {
        //             type: "p",
        //             children: "hello, Rhodri!"
        //         }
        //     ]
        // }

        // // 采用浏览器渲染配置创建渲染器
        // const { render } = createRenderer(BROWSER_RENDER_CONFIG)

        // render(vNode, document.querySelector('#app'))

        // // 卸载操作
        // setTimeout(()=> {
        //     render(null, document.querySelector('#app'))
        // }, 5000)

        // // 区分 vNode 类型
        // const n1 = {
        //     type: 'p',
        //     props: {
        //         id: "foo",
        //     },
        //     children:"准备变身"
        // }
        // const n2 = {
        //     type: 'input',
        //     props: {
        //         type: "submit",
        //     }
        // }

        // // 采用浏览器渲染配置创建渲染器
        // const { render } = createRenderer(BROWSER_RENDER_CONFIG)

        // render(n1, document.querySelector('#app'))

     
        // setTimeout(()=> {
        //     render(n2, document.querySelector('#app'))
        // }, 3000)

        // // 事件处理
        // const vNode = {
        //     type: 'p',
        //     props: {
        //         id: "foo",
        //         onClick:[
        //             ()=>{
        //                console.log('clicked132');
        //             },
        //             ()=>{
        //                console.log('clicked456');
        //             },
        //         ],
        //         onContextmenu: () => {
        //             console.log('contextmenu');
        //         } 
        //     },
        //     children:"准备变身"
        // }
        

        // // 采用浏览器渲染配置创建渲染器
        // const { render } = createRenderer(BROWSER_RENDER_CONFIG)

        // render(vNode, document.querySelector('#app'))


        // // 事件冒泡与更新时机问题
        // const bol = ref(false);

        // const { render } = createRenderer(BROWSER_RENDER_CONFIG)


        // effect(()=> {
        //     // 创建vNode
        //     const vNode = {
        //         type: 'div',
        //         props: bol.value ? {
        //             onClick: () => {
        //                 console.log('父元素 clicked');
        //             }
        //         } : {},
        //         children:[
        //             {
        //                 type: 'p',
        //                 props: {
        //                     onClick: ()=> {
        //                         bol.value = true;
        //                     }
        //                 },
        //                 children: 'text'
        //             }
        //         ]
        //     }

        //     render(vNode, document.querySelector('#app'))
        // });


        // // 文本节点
        // const { render } = createRenderer(BROWSER_RENDER_CONFIG)

        // const newVnode = {
        //     type: Text,
        //     children: '我是文本节点'
        // }

        // render(newVnode, document.querySelector('#app'))

        // // Fragment 片段
        // const { render } = createRenderer(BROWSER_RENDER_CONFIG)

        // const newVnode = {
        //     type: 'ul',
        //     children:[
        //         {
        //             type: Fragment,
        //             children: [
        //                 { type: 'li', children: 'text1' },
        //                 { type: 'li', children: 'text2' },
        //                 { type: 'li', children: 'text3' }
        //             ]
        //         }
        //     ]
        // }

        // render(newVnode, document.querySelector('#app'))

        // // 简单diff算法
        // const { render } = createRenderer(BROWSER_RENDER_CONFIG)

        // const oldVnode = {
        //     type: 'div',
        //     children:[
        //         { type: 'p', children: '1', key: 1 },
        //         { type: 'P', children: '2', key: 2 },
        //         { type: 'P', children: 'hello', key: 3}
        //     ]
        // }

        // const newVnode = {
        //     type: 'div',
        //     children:[
        //         { type: 'p', children: 'world', key: 3 },
        //         { type: 'p', children: '4', key: 4 },
        //     ]
        // }

        // render(oldVnode, document.querySelector('#app'))

        // setTimeout(() => {
        //     render(newVnode, document.querySelector('#app'))
        // }, 1000)

        // // 双端diff算法
        // const { render } = createRenderer(BROWSER_RENDER_CONFIG)

        // const oldVnode = {
        //     type: 'div',
        //     children:[
        //         { type: 'p', children: 'p-1', key: 1 },
        //         { type: 'P', children: 'p-2', key: 2 },
        //         { type: 'P', children: 'p-3', key: 3},
         
        //     ]
        // }

        // const newVnode = {
        //     type: 'div',
        //     children:[
        //         // { type: 'P', children: 'p-2', key: 2 },
        //         // { type: 'P', children: 'p-4', key: 4},
        //         { type: 'p', children: 'p-1', key: 1 },
        //         { type: 'P', children: 'p-3', key: 3},
        //     ]
        // }

        // render(oldVnode, document.querySelector('#app'))

        // setTimeout(() => {
        //     render(newVnode, document.querySelector('#app'))
        // }, 1000)

        
        // // 快速diff算法
        // const { render } = createRenderer(BROWSER_RENDER_CONFIG)

        // const oldVnode = {
        //     type: 'div',
        //     children:[
        //         { type: 'p', children: 'p-1', key: 1 },
        //         { type: 'P', children: 'p-2', key: 2 },
        //         { type: 'P', children: 'p-3', key: 3},
        //         { type: 'P', children: 'p-4', key: 4},
        //         { type: 'P', children: 'p-6', key: 6},
        //         { type: 'P', children: 'p-5', key: 5},
         
        //     ]
        // }

        // const newVnode = {
        //     type: 'div',
        //     children:[
        //         { type: 'p', children: 'p-1', key: 1 },
        //         { type: 'P', children: 'p-3', key: 3},
        //         { type: 'P', children: 'p-4', key: 4},
        //         { type: 'P', children: 'p-2', key: 2 },
        //         { type: 'P', children: 'p-7', key: 7 },
        //         { type: 'P', children: 'p-5', key: 5 },
        //     ]
        // }

        // render(oldVnode, document.querySelector('#app'))

        // setTimeout(() => {
        //     render(newVnode, document.querySelector('#app'))
        // }, 1000)

        
        // 渲染组件

        // 采用浏览器渲染配置创建渲染器
       const { render } = createRenderer(BROWSER_RENDER_CONFIG)
       
       const compVnode = {
            type: MyComponent,
            props:{
                title: 'a big Title'
            }
        }
        
       render(compVnode, document.querySelector('#app'))
     
    </script>
</body>
</html>